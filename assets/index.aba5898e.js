(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();const B=(e,t,r,n,s)=>{const a=[{letter:"A",cepMin:0,cepMax:69,egesMin:0,egesMax:5,color:"#329837"},{letter:"B",cepMin:70,cepMax:109,egesMin:6,egesMax:10,color:"#57af37"},{letter:"C",cepMin:110,cepMax:179,egesMin:11,egesMax:29,color:"#c6d300"},{letter:"D",cepMin:180,cepMax:249,egesMin:30,egesMax:49,color:"#f2e500"},{letter:"E",cepMin:250,cepMax:329,egesMin:50,egesMax:69,color:"#ffcb03"},{letter:"F",cepMin:330,cepMax:419,egesMin:70,egesMax:99,color:"#f39739"},{letter:"G",cepMin:420,cepMax:1e3,egesMin:100,egesMax:1e3,color:"#e4251f"}];let i=.6,o=document.getElementById(e);o.style.height=t+"px",o.style.width=r+"px";let c=document.createElement("div");c.classList.add("main-container");let g=document.createElement("span");g.style.width=r*i+"px",g.style.fontSize=t/45+"px",g.classList.add("top-legend"),g.innerHTML="logement tr\xE8s performant",c.appendChild(g);let l=document.createElement("div");l.classList.add("container-bars"),l.style.width=r*i+"px";let m=40;for(let d of a){let p=document.createElement("div");p.classList.add("container-bar"),p.style.width=m+"%",m=m+10,l.append(p);let w=document.createElement("span");w.innerHTML=d.letter,w.classList.add("bar-letter");let P=12,T="stroke:none";if(n>=d.cepMin&&n<=d.cepMax&&s<=d.egesMax||s>=d.egesMin&&s<=d.egesMax&&n<=d.cepMax){w.classList.add("bar-letter-focus"),p.style.height=P*1.6+"%",p.style.fontSize=t/5+"px",T="stroke:black";let y=document.createElement("div");y.classList.add("bar-info-focus"),y.style.width=r*(1-i)-4+"px",y.style.left="-"+(r*(1-i)-4)+"px",p.appendChild(y);let S=document.createElement("div");S.style.fontSize=r/45+"px",S.classList.add("focus-dpe-info");let E=document.createElement("span");E.classList.add("span"),E.style.fontSize=t/13+"px",E.innerHTML=n,S.appendChild(E);let C=document.createElement("span");C.classList.add("focus-legend"),C.innerHTML=`
                    kWh/m<sup>2</sup>.an
                `,S.appendChild(C),y.appendChild(S);let b=document.createElement("div");b.style.fontSize=r/45+"px",b.classList.add("focus-ges-info");let x=document.createElement("span");x.classList.add("span"),x.style.fontSize=t/13+"px",x.innerHTML=s,b.appendChild(x);let L=document.createElement("span");L.classList.add("focus-legend"),L.innerHTML=`
                  kgCO<sub>2</sub>/m<sup>2</sup>.an  
                `,b.appendChild(L),y.appendChild(b)}else p.style.height=P+"%",p.style.fontSize=t/10+"px";p.insertAdjacentHTML("afterbegin",`
            <svg 
                width='100%' 
                height='100%' 
                viewBox="700 0 100 100" 
                style='background-color: white'
                preserveAspectRatio="xMaxYMax meet"
            >
                <path 
                    d="M1 1 L 780 1 L 797 50 L 780 99 L 1 99 Z" 
                    vector-effect="non-scaling-stroke" 
                    style="`+T+";stroke-width:3;fill:"+d.color+`"/>
            </svg>
            `),p.appendChild(w)}let f=document.createElement("span");f.style.width=r*(1-i)-7+"px",f.style.height=t/5+"px",f.style.fontSize=t/45+"px",f.classList.add("side-legend"),f.innerHTML="passoire \xE9nerg\xE9tique",c.appendChild(f);let u=document.createElement("span");u.style.width=r*i+"px",u.style.fontSize=t/45+"px",u.classList.add("bottom-legend"),u.innerHTML="logement extr\xEAmement consommateur d'\xE9nergie",c.appendChild(u),c.appendChild(l),o.childNodes.length!=0&&o.removeChild(o.firstElementChild),o.appendChild(c)};function X(){const e=document.getElementById("presetParamBtn"),t=document.getElementById("presetParamContainer");t.style.display="none";const r=document.getElementById("customParamBtn"),n=document.getElementById("customParamContainer");n.style.display="none",e.addEventListener("click",l=>{l.preventDefault(),t.style.display==="none"?t.style.display="block":t.style.display="none",n.style.display==="block"&&(n.style.display="none")}),r.addEventListener("click",l=>{l.preventDefault(),n.style.display==="none"?n.style.display="block":n.style.display="none",t.style.display==="block"&&(t.style.display="none")});const s=document.getElementById("createButton");let a,i;document.getElementById("stickerRatioContainer").addEventListener("change",function(l){a=l.target.value,console.log(a)}),document.getElementById("stickerSizeContainer").addEventListener("change",function(l){i=l.target.value,console.log(i)}),s.addEventListener("click",l=>{l.preventDefault();let m=document.getElementById("dpeInput").value,f=document.getElementById("gesInput").value,u=600,d;i==="large"&&(u=u*1.2),i==="small"&&(u=u*.8),a==="square"&&(d=u),a==="rectangle"&&(d=u*.7),B("DepGes",u,d,m,f)}),document.getElementById("createCustomButton").addEventListener("click",l=>{l.preventDefault();let m=document.getElementById("dpeInput").value,f=document.getElementById("gesInput").value,u=document.getElementById("heightInput").value,d=document.getElementById("widthInput").value;B("DepGes",u,d,m,f)})}const $="application/font-woff",z="image/jpeg",J={woff:$,woff2:$,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:z,jpeg:z,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"};function Q(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function I(e){const t=Q(e).toLowerCase();return J[t]||""}function Y(e){return e.split(/,/)[1]}function R(e){return e.search(/^(data:)/)!==-1}function H(e,t){return`data:${t};base64,${e}`}async function U(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const s=await n.blob();return new Promise((a,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{a(r({res:n,result:o.result}))}catch(c){i(c)}},o.readAsDataURL(s)})}const M={};function Z(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function k(e,t,r){const n=Z(e,t,r.includeQueryParams);if(M[n]!=null)return M[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let s;try{const a=await U(e,r.fetchRequestInit,({res:i,result:o})=>(t||(t=i.headers.get("Content-Type")||""),Y(o)));s=H(a,t)}catch(a){s=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;a&&(i=typeof a=="string"?a:a.message),i&&console.warn(i)}return M[n]=s,s}function N(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),s=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(s),t&&(n.href=t),s.href=e,s.href}const ee=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function h(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}function v(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function te(e){const t=v(e,"border-left-width"),r=v(e,"border-right-width");return e.clientWidth+t+r}function ne(e){const t=v(e,"border-top-width"),r=v(e,"border-bottom-width");return e.clientHeight+t+r}function re(e,t={}){const r=t.width||te(e),n=t.height||ne(e);return{width:r,height:n}}function q(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>t(n),n.onerror=r,n.crossOrigin="anonymous",n.decoding="sync",n.src=e})}async function se(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function ae(e,t,r){const n="http://www.w3.org/2000/svg",s=document.createElementNS(n,"svg"),a=document.createElementNS(n,"foreignObject");return s.setAttribute("width",`${t}`),s.setAttribute("height",`${r}`),s.setAttribute("viewBox",`0 0 ${t} ${r}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),s.appendChild(a),a.appendChild(e),se(s)}function ie(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function oe(e){return h(e).map(t=>{const r=e.getPropertyValue(t),n=e.getPropertyPriority(t);return`${t}: ${r}${n?" !important":""};`}).join(" ")}function ce(e,t,r){const n=`.${e}:${t}`,s=r.cssText?ie(r):oe(r);return document.createTextNode(`${n}{${s}}`)}function D(e,t,r){const n=window.getComputedStyle(e,r),s=n.getPropertyValue("content");if(s===""||s==="none")return;const a=ee();try{t.className=`${t.className} ${a}`}catch{return}const i=document.createElement("style");i.appendChild(ce(a,r,n)),t.appendChild(i)}function le(e,t){D(e,t,":before"),D(e,t,":after")}async function ue(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):q(t)}async function de(e,t){const r=e.poster,n=I(r),s=await k(r,n,t);return q(s)}async function fe(e,t){return e instanceof HTMLCanvasElement?ue(e):e instanceof HTMLVideoElement&&e.poster?de(e,t):e.cloneNode(!1)}const me=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT";async function pe(e,t,r){var n;const s=me(e)&&e.assignedNodes?h(e.assignedNodes()):h(((n=e.shadowRoot)!==null&&n!==void 0?n:e).childNodes);return s.length===0||e instanceof HTMLVideoElement||await s.reduce((a,i)=>a.then(()=>G(i,r)).then(o=>{o&&t.appendChild(o)}),Promise.resolve()),t}function ge(e,t){const r=t.style;if(!r)return;const n=window.getComputedStyle(e);n.cssText?(r.cssText=n.cssText,r.transformOrigin=n.transformOrigin):h(n).forEach(s=>{let a=n.getPropertyValue(s);s==="font-size"&&a.endsWith("px")&&(a=`${Math.floor(parseFloat(a.substring(0,a.length-2)))-.1}px`),r.setProperty(s,a,n.getPropertyPriority(s))})}function he(e,t){e instanceof HTMLTextAreaElement&&(t.innerHTML=e.value),e instanceof HTMLInputElement&&t.setAttribute("value",e.value)}function ye(e,t){if(e instanceof HTMLSelectElement){const r=t,n=Array.from(r.children).find(s=>e.value===s.getAttribute("value"));n&&n.setAttribute("selected","")}}function Se(e,t){return t instanceof Element&&(ge(e,t),le(e,t),he(e,t),ye(e,t)),t}async function G(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>fe(n,t)).then(n=>pe(e,n,t)).then(n=>Se(e,n))}const _=/url\((['"]?)([^'"]+?)\1\)/g,be=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,we=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Ee(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function xe(e){const t=[];return e.replace(_,(r,n,s)=>(t.push(s),r)),t.filter(r=>!R(r))}async function ve(e,t,r,n,s){try{const a=r?N(t,r):t,i=I(t);let o;if(s){const c=await s(a);o=H(c,i)}else o=await k(a,i,n);return e.replace(Ee(t),`$1${o}$3`)}catch{}return e}function Ce(e,{preferredFontFormat:t}){return t?e.replace(we,r=>{for(;;){const[n,,s]=be.exec(r)||[];if(!s)return"";if(s===t)return`src: ${n};`}}):e}function j(e){return e.search(_)!==-1}async function K(e,t,r){if(!j(e))return e;const n=Ce(e,r);return xe(n).reduce((a,i)=>a.then(o=>ve(o,i,t,r)),Promise.resolve(n))}async function Le(e,t){var r;const n=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue("background");if(n){const s=await K(n,null,t);e.style.setProperty("background",s,e.style.getPropertyPriority("background"))}}async function Me(e,t){if(!(e instanceof HTMLImageElement&&!R(e.src))&&!(e instanceof SVGImageElement&&!R(e.href.baseVal)))return;const r=e instanceof HTMLImageElement?e.src:e.href.baseVal,n=await k(r,I(r),t);await new Promise((s,a)=>{e.onload=s,e.onerror=a,e instanceof HTMLImageElement?(e.srcset="",e.src=n):e.href.baseVal=n})}async function Re(e,t){const n=h(e.childNodes).map(s=>W(s,t));await Promise.all(n).then(()=>e)}async function W(e,t){e instanceof Element&&(await Le(e,t),await Me(e,t),await Re(e,t))}function Ie(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(s=>{r[s]=n[s]}),e}const A={};async function F(e){let t=A[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},A[e]=t,t}async function V(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,a=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,e.url).href),U(o,t.fetchRequestInit,({result:c})=>(r=r.replace(i,`url(${c})`),[i,c]))});return Promise.all(a).then(()=>r)}function O(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const s=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=s.exec(n);if(c===null)break;t.push(c[0])}n=n.replace(s,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let c=a.exec(n);if(c===null){if(c=o.exec(n),c===null)break;a.lastIndex=o.lastIndex}else o.lastIndex=a.lastIndex;t.push(c[0])}return t}async function ke(e,t){const r=[],n=[];return e.forEach(s=>{if("cssRules"in s)try{h(s.cssRules||[]).forEach((a,i)=>{if(a.type===CSSRule.IMPORT_RULE){let o=i+1;const c=a.href,g=F(c).then(l=>V(l,t)).then(l=>O(l).forEach(m=>{try{s.insertRule(m,m.startsWith("@import")?o+=1:s.cssRules.length)}catch(f){console.error("Error inserting rule from remote css",{rule:m,error:f})}})).catch(l=>{console.error("Error loading remote css",l.toString())});n.push(g)}})}catch(a){const i=e.find(o=>o.href==null)||document.styleSheets[0];s.href!=null&&n.push(F(s.href).then(o=>V(o,t)).then(o=>O(o).forEach(c=>{i.insertRule(c,s.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o.toString())})),console.error("Error inlining remote css file",a.toString())}}),Promise.all(n).then(()=>(e.forEach(s=>{if("cssRules"in s)try{h(s.cssRules||[]).forEach(a=>{r.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${s.href}`,a.toString())}}),r))}function Pe(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>j(t.style.getPropertyValue("src")))}async function Te(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=h(e.ownerDocument.styleSheets),n=await ke(r,t);return Pe(n)}async function Be(e,t){const r=await Te(e,t);return(await Promise.all(r.map(s=>{const a=s.parentStyleSheet?s.parentStyleSheet.href:null;return K(s.cssText,a,t)}))).join(`
`)}async function $e(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Be(e,t);if(r){const n=document.createElement("style"),s=document.createTextNode(r);n.appendChild(s),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function ze(e,t={}){const{width:r,height:n}=re(e,t),s=await G(e,t,!0);return await $e(s,t),await W(s,t),Ie(s,t),await ae(s,r,n)}function De(){document.getElementById("screenshotButton").addEventListener("click",t=>{console.log("hello");const r=document.getElementById("DepGes");ze(r).then(function(n){var s=new Image;s.src=n,document.body.appendChild(s)}).catch(function(n){console.error("oops, something went wrong!",n)})})}document.querySelector("#app").innerHTML=`
    <div id="params" class="params">
        <form>
            <div class="values-container">
                <div class="dpe-container">
                    <span>valeur dpe</span>
                    <input type="text" value="12" id="dpeInput"></input>
                </div>
                <div class="ges-container">
                    <span>valeur ges</span>
                    <input type="text" value="50" id="gesInput"></input>
                </div> 
            </div>
            <div class="paramSelector">
                <button id="presetParamBtn">Preset</button>
                <button id="customParamBtn">Custom</button>
            </div>
            <div id="presetParamContainer">
                <div id="stickerRatioContainer">
                    <p>Veuillez choisir le format:</p>
                    <input type="radio" id="stickerRatioSquare"
                    name="ratio" value="square">
                    <label for="stickerRatioSquare">square</label>
                    <input type="radio" id="stickerRatioRectangle"
                    name="ratio" value="rectangle">
                    <label for="stickerRatioRectangle">rectangle</label>
                </div>
                <div id="stickerSizeContainer">
                    <p>Veuillez choisir la taille:</p>
                    <input type="radio" id="stickerSizeSmall"
                    name="size" value="small">
                    <label for="stickerSizeSmall">small</label>
                    <input type="radio" id="stickerSizeMedium"
                    name="size" value="medium">
                    <label for="stickerSizeMedium">medium</label>
                    <input type="radio" id="stickerSizeLarge"
                    name="size" value="large">
                    <label for="stickerSizeLarge">large</label>
                </div>
                <button id="createButton" class="create">create</button>
            </div>
            <div id="customParamContainer">
                <div class="size-container">
                    <span>width</span>
                    <input type="text" value="500" id="widthInput"></input>
                    <span>height</span>
                    <input type="text" value="600" id="heightInput"></input>
                </div>
                <button id="createCustomButton" class="create">create</button>
            </div>
        </form>

        <div>
            <span>SCREENSHOT</span>
            <button id="screenshotButton">CLICK</button>
        </div>
    </div>
    <div id="DepGes" class="depges"></div>
`;X();De();
